@startuml

skinparam {
    NoteBackgroundColor #whiteSmoke
}

    state ITERATION_MANAGEMENT_STARTS as ":ITERATION_MANAGEMENT"
    state ITERATION_MANAGEMENT_ENDS as ":ITERATION_MANAGEMENT"

    ITERATION_MANAGEMENT_STARTS --> MergeActivity
    note on link
        User requests to merge AssignedActivity
    end note

    state MergeActivity {
        state 13 as " " #LawnGreen
        state 5 as " " #LawnGreen
        state 14 as " " #LawnGreen
        state 20 as " "
        state 15 as " " #LawnGreen

    [*] --> 13
    note on link
    <b>System shows</b>
    * for each member
    **assignedActivities in his datetime until end of current iteration
    * for each discipline (requirements, analysis, design, implementation)
    ** NotAssignedCost
    <b>System requires</b>
    * AssignedActivity to be merged
    <b>System allows</b>
    * cancel merge activity
    end note

    13 --> 5
    note on link
        User provides AssignedActivity
    end note

    13 --> 20
    note on link
        User requests to cancel merge activity
    end note

    5 --> 14
    note on link
    <b>System shows</b>
    * for each discipline (requirements, analysis, design, implementation)
    ** NotAssignedCost
    <b>System requires</b>
    * NotAssignedCost as merge destination
    <b>System allows</b>
    * cancel merge activity
    end note

    14 --> 20
    note on link
        User requests to cancel merge activity
    end note

    14 -down-> 15
    note on link
        User provides merge destination
    end note

    20 --> [*]
    note on link
         <b>System shows</b>
         * Merge activity cancelled
    end note

    15 --> [*]
    note on link
     <b>System shows</b>
     * AssignedActivity was returned to NotAssignedCost
     end note
}

MergeActivity --> ITERATION_MANAGEMENT_ENDS
note on link
     <b>System shows</b>
     * for each member
     **assignedActivities in his datetime until end of current iteration
     * for each discipline (requirements, analysis, design, implementation)
     ** NotAssignedCost
     ** NotAssignedActivities (with activity type)
     <b>System allows</b>
     * Split activity
     * Assign activity
     * Re-estimate activity
     * Merge activity
     * Open iterations
     * Open members
     * Close system
     end note

@enduml
